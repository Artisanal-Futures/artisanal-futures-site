model GenerationJob {
  id          String   @id
  userId      String
  type        String
  status      String
  replicateId String?
  input       Json
  output      Json?
  error       String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime
}

model TrainingImage {
  id              String        @id
  trainingModelId String
  imageUrl        String
  userCaption     String?
  autoCaption     String?
  createdAt       DateTime      @default(now())
  updatedAt       DateTime
  TrainingModel   TrainingModel @relation(fields: [trainingModelId], references: [id], onDelete: Cascade)
}

model TrainingModel {
  id               String          @id
  userId           String
  triggerWord      String
  status           status          @default(QUEUED)
  weightsUrl       String
  log              Json?
  zipFileUrl       String?
  createdAt        DateTime        @default(now())
  updatedAt        DateTime
  trainingSettings Json?
  trainingDetails  Json?
  error            String?
  referenceId      String?
  TrainingImage    TrainingImage[]
}

enum status {
  QUEUED
  PROCESSING
  SUCCEEDED
  FAILED
  CANCELED
  TIMEOUT
}
